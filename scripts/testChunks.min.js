import{readFileSync,writeFileSync,existsSync,mkdirSync,rmSync}from"fs";import{config}from"dotenv";import{fileURLToPath}from"url";import{dirname}from"path";import path from"path";const __filename=fileURLToPath(import.meta.url),__dirname=dirname(__filename);config(path.resolve(__dirname,"../.env"));const{VITE_EXCEL_FILE:VITE_EXCEL_FILE}=process.env;VITE_EXCEL_FILE||(console.error("‚ùå Error: VITE_EXCEL_FILE environment variable is not set"),process.exit(1)),existsSync("./dist")||mkdirSync("./dist",{recursive:!0}),existsSync("./dist/data")||mkdirSync("./dist/data",{recursive:!0});try{console.log("Reading chunks as binary...");const binaryChunks=[];for(let i=1;i<=6;i++){const chunkPath="./.temp/chunk_"+(i-1);if(!existsSync(chunkPath))throw console.error(`‚ö†Ô∏è Warning: Chunk ${i-1} not found at ${chunkPath}`),new Error("Missing chunks");{const data=readFileSync(chunkPath);binaryChunks.push(data),console.log(`‚úÖ Read chunk ${i-1}: ${data.length} bytes`)}}const combined=Buffer.concat(binaryChunks);console.log(`‚úÖ Combined ${binaryChunks.length} chunks: ${combined.length} bytes`),writeFileSync(`./data/${VITE_EXCEL_FILE}`,combined),console.log(`‚úÖ Wrote Excel file: ${combined.length} bytes`);const base64Data=combined.toString("base64");console.log(`‚úÖ Base64 encoded: ${base64Data.length} characters`),console.log("üßπ Cleaning up..."),rmSync("./.temp",{recursive:!0,force:!0}),console.log("‚úÖ Done!")}catch(error){console.error("‚ùå Error:",error.message),process.exit(1)}